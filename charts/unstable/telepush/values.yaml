image:
  repository: ghcr.io/muety/telepush
  tag: 4.1.1@3238c403f93d4004a406f6bc19f5e83957efb6287bfc1498136d747b8f44908a
  pullPolicy: IfNotPresent

service:
  main:
    ports:
      main:
        protocol: http
        port: 8080

telepush:
  # webhook | poll
  mode: webhook
  token: ""
  ratelimit: 100
  cmdratelimit: 10

workload:
  main:
    podSpec:
      containers:
        main:
          probes:
            liveness:
              path: "/api"
            readiness:
              path: "/api"
            startup:
              path: "/api"
          args:
            - -port
            - "{{ .Values.service.main.ports.main.port }}"
          env:
            APP_MODE: "{{ .Values.telepush.mode }}"
            APP_TOKEN: "{{ .Values.telepush.token }}"
            APP_RATE_LIMIT: "{{ .Values.telepush.ratelimit }}"
            APP_CMD_RATE_LIMIT: "{{ .Values.telepush.cmdratelimit }}"

persistence:
  data:
    enabled: true
    mountPath: "/srv/data"

portal:
  open:
    enabled: false
