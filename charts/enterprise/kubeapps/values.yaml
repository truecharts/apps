image:
  pullPolicy: IfNotPresent
  repository: ghcr.io/xstar97/my-proxy-service
  tag: v0.0.2@sha256:8d25a6ff316f140be1f198376e84208902ddf61a38a78076c1b11a81924d4019

operator:
  register: false
  
portal:
  open:
    enabled: true
    
persistence:
  token:
    type: projected
    mountPath: /service-account
    sources:
      - serviceAccountToken:
          expirationSeconds: 3600
          path: token
          
podOptions:
  automountServiceAccountToken: true
    
workload:
  main:
    enabled: false
  tcopen:
    enabled: true
    expandObjectName: false
    type: Deployment
    podSpec:
      containers:
        container-name:
          env:
            PORT: 3000    
          args:
            - --api-file /service-account/token
            - --proxy-target http://tckubeapps:8080
            - --auth-token-header authorization
          probes:
            liveness:
              enabled: true
              type: tcp
              port: 3000
            readiness:
              enabled: true
              type: tcp
              port: 3000
            startup:
              enabled: true
              type: tcp
              port: 3000

service:
  main:
    enabled: false
  tcopen:
    enabled: true
    expandObjectName: false
    ports:
      tcopen:
        enabled: true
        primary: true
        port: 3000
        targetPort: 3000
  tckubeapps:
    enabled: true
    expandObjectName: false
    primary: true
    labels:
      truecharts.org/flagged: "true"
    selectorLabels:
      app.kubernetes.io/component: frontend
      truecharts.org/kahack: frontend
    ports:
      tckubeapps:
        enabled: true
        primary: true
        port: 8080
        targetPort: 8080

serviceAccount:
  kubeapps-operator:
    enabled: true
    primary: true

rbac:
  kubeapps-operator:
    enabled: true
    primary: true
    clusterWide: true
    allServiceAccounts: true
    rules:
      - apiGroups: ["*"]
        resources: ["*"]
        verbs: ["*"]

kubeapps:
  frontend:
    podLabels:
      truecharts.org/kahack: frontend
  apprepository:
    initialRepos:
      - name: truecharts
        url: https://charts.truecharts.org
