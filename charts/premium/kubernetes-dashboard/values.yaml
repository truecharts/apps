image:
  repository: kubernetesui/dashboard
  pullPolicy: IfNotPresent
  tag: v2.6.1
  
scraperImage:
  repository: kubernetesui/metrics-scraper
  pullPolicy: IfNotPresent
  tag: v1.0.9

service:
  main:
    ports:
      main:
        port: 443
        targetPort: 8443
        protocol: https

workload:
  main:
    enabled: true
    spec:
      containers:
        main:
         args:
           - --namespace={{ .Release.Namespace }}
           - --auto-generate-certificates
           - --sidecar-host=http://127.0.0.1:8000
           - --enable-insecure-login
           - --enable-skip-login
           - --system-banner="Powered by TrueCharts!"
  scraper:
    enabled: true
    type: Deployment
    podSpec:
      containers:
        scraper:
          enabled: true
          primary: true
          imageSelector: scraperImage
          probes:
            liveness:
              enabled: true
              type: https
              port: 8000
            readiness:
              enabled: true
              type: https
              port: 8000
            startup:
              enabled: true
              type: https
              port: 8000

podOptions:
  automountServiceAccountToken: true

persistence:
  kubernetes-dashboard-certs:
    enabled: true
    type: secret
    objectName: kubernetes-dashboard-certs
    expandObjectName: false
    mountPath: /certs

secret:
  kubernetes-dashboard-certs:
    enabled: true
    expandObjectName: false
    data:
      placeholder: something

portal:
  open:
    enabled: true

rbac:
  main:
    enabled: true
    primary: true
    clusterWide: true
    serviceAccounts:
      - main
    rules:
      - apiGroups: [""]
        resources: ["secrets"]
        resourceNames: ["kubernetes-dashboard-key-holder", "kubernetes-dashboard-certs", "kubernetes-dashboard-csrf"]
        verbs: ["get", "update", "delete"]
        # Allow Dashboard to get and update 'kubernetes-dashboard-settings' config map.
      - apiGroups: [""]
        resources: ["configmaps"]
        resourceNames: ["kubernetes-dashboard-settings"]
        verbs: ["get", "update"]
        # Allow Dashboard to get metrics.
      - apiGroups: [""]
        resources: ["services"]
        resourceNames: ["heapster", "dashboard-metrics-scraper"]
        verbs: ["proxy"]
      - apiGroups: [""]
        resources: ["services/proxy"]
        resourceNames: ["heapster", "http:heapster:", "https:heapster:", "dashboard-metrics-scraper", "http:dashboard-metrics-scraper"]
        verbs: ["get"]
  allaccess:
    enabled: true
    clusterWide: true
    serviceAccounts:
      - main
    rules:
      - apiGroups: ["*"]
        resources: ["*"]
        verbs: ["*"]
  metricsscraper:
    enabled: true
    clusterWide: true
    serviceAccounts:
      - scraper
    rules:
    - apiGroups: ["metrics.k8s.io"]
      resources: ["pods", "nodes"]
      verbs: ["get", "list", "watch"]

# -- The service account the pods will use to interact with the Kubernetes API
serviceAccount:
  main:
    enabled: true
    primary: true
    targetSelector:
      - main
  scraper:
    enabled: true
    targetSelector:
      - scraper
