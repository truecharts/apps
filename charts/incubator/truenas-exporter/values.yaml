image:
  repository: prom/graphite-exporter
  pullPolicy: IfNotPresent
  tag: v0.15.0

service:
  main:
    ports:
      main:
        protocol: tcp
        port: 9109
  metrics:
    enabled: true
    ports:
      metrics:
        enabled: true
        protocol: http
        port: 9108
        
workload:
  main:
    podSpec:
      containers:
        main:
          args:
            - --graphite.mapping-config=/config/graphite_mapping.conf

metrics:
  main:
    enabled: true
    targetSelector: metrics
    endpoints:
     - port: metrics

configmap:
  dashboard:
    enabled: true
    labels:
      grafana_dashboard: "1"
    data:
      truenasexporter.json: >-
        {{ .Files.Get "dashboard.json" | indent 8 }}
  config:
    enabled: true
    data:
      graphite_mapping.conf: >-
        {{ .Files.Get "graphite_mapping.conf" | indent 8 }}
  

portal:
  open:
    enabled: false

persistence:
  config:
    enabled: true
    type: configmap
    mountPath: /config/graphite_mapping.conf
    objectName: config
    readOnly: true
    subPath: graphite_mapping.conf