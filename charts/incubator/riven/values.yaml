image:
  repository: ghcr.io/elfhosted/riven
  pullPolicy: IfNotPresent
  tag: v0.15.3@sha256:9afd9a810493df564393f674e4da10af89f124899dc9ab5ac3a93a722529d29d

frontendImage:
  repository: ghcr.io/elfhosted/riven-frontend
  pullPolicy: IfNotPresent
  tag: v0.13.1@sha256:92cee31094be29b9a2df7e18527dc7cfc3e82bb4acff56c7da6496576ef619ad

service:
  main:
    ports:
      main:
        port: 8080
        targetPort: 8080

workload:
  main:
    podSpec:
      containers:
        main:
          env:
            # forces the use of env vars to be always used!
            RIVEN_FORCE_ENV: "true" 
            # Set this to your rclone's mount `__all__` dir if using Zurg
            RIVEN_SYMLINK_RCLONE_PATH: "/mnt/zurg/__all__" 
            # This is the path that symlinks will be placed in
            RIVEN_SYMLINK_LIBRARY_PATH: "/mnt/library" 
            RIVEN_DATABASE_HOST: '{{ printf "postgresql+psycopg2://%s:%s@%s.%s/%s" .Values.cnpg.main.user .Values.cnpg.main.creds.password (.Values.cnpg.main.creds.host | trimAll "\"") .Release.Namespace .Values.cnpg.main.database }}'
            RIVEN_DOWNLOADERS_REAL_DEBRID_ENABLED: "false"
            # set your real debrid api key
            RIVEN_DOWNLOADERS_REAL_DEBRID_API_KEY: "xxxxx"
            RIVEN_UPDATERS_PLEX_ENABLED: "false"
            RIVEN_UPDATERS_PLEX_URL: "http://plex:32400"
            # set your plex token"
            RIVEN_UPDATERS_PLEX_TOKEN: "xxxxx" 
            RIVEN_CONTENT_OVERSEERR_ENABLED: "false"
            RIVEN_CONTENT_OVERSEERR_URL: "http://overseerr:5055"
            # set your overseerr token
            RIVEN_CONTENT_OVERSEERR_API_KEY: "xxxxx"
            RIVEN_SCRAPING_TORRENTIO_ENABLED: "false"
            RIVEN_SCRAPING_ZILEAN_ENABLED: "false"
            RIVEN_SCRAPING_ZILEAN_URL: "http://zilean:8181"
        frontend:
          enabled: true
          probes:
            liveness:
              port: 3000
            readiness:
              port: 3000
            startup:
              port: 3000
          env:
            ORIGIN: "http://localhost:3000"
            BACKEND_URL: "http://localhost:8080"
            DIALECT: "postgres"
            DATABASE_URL: '{{ printf "postgresql://%s:%s@%s.%s/%s" .Values.cnpg.main.user .Values.cnpg.main.creds.password (.Values.cnpg.main.creds.host | trimAll "\"") .Release.Namespace .Values.cnpg.main.database }}'


persistence:
  data:
    enabled: true
    mountPath: "/riven/data"
  zurg-all: 
    enabled: true
    mountPath: "/mnt/zurg/__all__"
  library:
    enabled: true
    mountPath: "/mnt/library"

cnpg:
  main:
    enabled: true
    user: riven
    database: riven

portal:
  open:
    enabled: true
