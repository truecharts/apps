image:
  repository: ghcr.io/gethomepage/homepage
  tag: v0.8.3@sha256:4214f13b534aa4b214665a41b50d60fe0f04ff41cddb8e72fe92811e1eed0112
  pullPolicy: IfNotPresent
# When this is defined, the contents will be mounted
# as configmap into the container at /app/config/bookmarks.yaml.
homepageConfig: {}
# ---
# # For configuration options and examples, please see:
# # https://gethomepage.dev/latest/configs/bookmarks
# 
# - Developer:
#     - Github:
#         - abbr: GH
#           href: https://github.com/
# 
# - Social:
#     - Reddit:
#         - abbr: RE
#           href: https://reddit.com/
# 
# - Entertainment:
#     - YouTube:
#         - abbr: YT
#           href: https://youtube.com/
# 
# - TrueCharts:
#     - TrueCharts:
#         - abbr: TC
#           icon: https://truecharts.org/svg/favicon.svg
#           href: https://truecharts.org
#           description: ""
#     - Github:
#         - abbr: GH
#           icon: https://github.com/fluidicon.png
#           href: https://github.com/truecharts
#            description: ""
#     - Open Collective:
#         - abbr: TC
#           icon: https://opencollective.com/favicon.ico
#           href: https://opencollective.com/truecharts
#           description: ""
#     - Discord:
#         - abbr: DC
#           icon: https://t2.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=http://discord.com&size=32
#           href: https://truecharts.org/s/discord
#           description: ""

workload:
  main:
    podSpec:
      initContainers:
        init-config:
          enabled: "{{ not .Values.homepageConfig }}"
          type: init
          imageSelector: alpineImage
          command:
            - /bin/sh
            - -c
            - |
              mkdir -p /app/config
              if [ ! -f /app/config/bookmarks.yaml ]; then
                echo "Bookmarks file not found, copying dummy..."
                cp /dummy-config/bookmarks.yaml.dummy /app/config/bookmarks.yaml
                echo "Config file copied, you can now edit it at /app/config/bookmarks.yaml"
              fi
service:
  main:
    ports:
      main:
        port: 10352
        protocol: http
        targetPort: 3000
persistence:
  config:
    enabled: true
    mountPath: /app/config
  kubernetes-config:
    enabled: true
    mountPath: /app/config/kubernetes.yaml
    subPath: kubernetes.yaml
    readOnly: true
    type: "configmap"
    objectName: kubernetes-config
  bookmarks-config:
    # Only enable when not using homepageConfig
    enabled: false
    mountPath: /app/config/bookmarks.yaml
    targetSelector:
      main:
        main: {}
        init-config: {}

portal:
  open:
    enabled: true
serviceAccount:
  main:
    enabled: true
    primary: true

podOptions:
  dnsConfig:
    options:
      - name: ndots
        value: "3"

configmap:
  kubernetes-config:
    enabled: true
    data:
      kubernetes.yaml: |
        mode: cluster
  bookmarks-config:
    enabled: true
    data:
      bookmarks.yaml: |


rbac:
  main:
    enabled: true
    primary: true
    clusterWide: true
    rules:
      - apiGroups:
          - ""
        resources:
          - namespaces
          - pods
          - nodes
        verbs:
          - get
          - list
      - apiGroups:
          - extensions
          - networking.k8s.io
        resources:
          - ingresses
        verbs:
          - get
          - list
      - apiGroups:
          - traefik.containo.us
          - traefik.io
        resources:
          - ingressroutes
        verbs:
          - get
          - list
      - apiGroups:
          - metrics.k8s.io
        resources:
          - nodes
          - pods
        verbs:
          - get
          - list
      - apiGroups:
          - apiextensions.k8s.io
        resources:
          - customresourcedefinitions/status
        verbs:
          - get
workload:
  main:
    podSpec:
      automountServiceAccountToken: true
